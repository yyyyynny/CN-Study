<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§± ë¼ì˜¤ì‰¬ ìˆ˜í–‰ ì—°ìŠµ</title>
    <style>
        /* ê¹”ë”í•˜ê³  ì§‘ì¤‘ ì˜ ë˜ëŠ” ë””ìì¸ */
        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; background-color: #f7f9fc; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 40px 30px; border-radius: 20px; box-shadow: 0 12px 24px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 550px; }
        h2 { color: #2c3e50; margin: 0 0 10px 0; letter-spacing: -1px; }
        .subtitle { color: #7f8c8d; font-size: 0.95em; margin-bottom: 30px; line-height: 1.6; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        
        #question { font-size: 38px; font-weight: 800; color: #007bff; margin: 20px 0; min-height: 60px; word-break: keep-all; display: flex; align-items: center; justify-content: center; }
        
        input { width: 100%; box-sizing: border-box; padding: 16px; font-size: 18px; border: 2px solid #e1e4e8; border-radius: 12px; outline: none; text-align: center; transition: all 0.3s; background-color: #fafafa; }
        input:focus { border-color: #007bff; background-color: #fff; box-shadow: 0 0 0 4px rgba(0,123,255,0.1); }
        
        .btn-area { margin-top: 25px; display: flex; justify-content: center; gap: 12px; }
        button { padding: 14px 28px; font-size: 16px; border: none; border-radius: 10px; cursor: pointer; font-weight: 700; transition: transform 0.1s; }
        button:active { transform: scale(0.98); }
        .check-btn { background-color: #28a745; color: white; flex: 2; }
        .skip-btn { background-color: #ecf0f1; color: #444; flex: 1; }
        
        #result { margin-top: 25px; font-weight: 800; font-size: 18px; height: 24px; }
        .correct { color: #27ae60; }
        .wrong { color: #e74c3c; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´ ìˆ˜í–‰ ì—°ìŠµ</h2>
        <div class="subtitle">
            ì„±ì¡° ë²ˆí˜¸ ìœ„ì¹˜ë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.<br>
            ì˜ˆ: <b>shuÃ i</b> â†’ shua4i (a ë’¤), <b>liÃ¹</b> â†’ liu4 (u ë’¤)
        </div>
        
        <div id="question">Loading...</div>
        
        <input type="text" id="answerInput" placeholder="ì˜ˆ: Ji1n, Do1ng" autocomplete="off">
        
        <div id="result"></div>

        <div class="btn-area">
            <button class="check-btn" onclick="checkAnswer()">í™•ì¸ (Enter)</button>
            <button class="skip-btn" onclick="nextProblem()">ê±´ë„ˆë›°ê¸°</button>
        </div>
    </div>

    <script>
        // ==========================================
        // [ë°ì´í„°] ê°€ì¤‘ì¹˜(weight) ì‹œìŠ¤í…œ ì ìš©
        // weight: 1.0 (ê¸°ë³¸) / 1.2 (ì•½ê°„ ë” ìì£¼ ë‚˜ì˜´)
        // ==========================================
        const db = [
            // [1. êµ­ì ] -------------------------------------
            { w: 1, hanzi: "ä½ æ˜¯å“ªå›½äºº?", answer: "Ni3 shi4 na3 guo2 re2n?" },
            { w: 1, hanzi: "æˆ‘æ˜¯éŸ©å›½äººã€‚", answer: "Wo3 shi4 Ha2nguo2re2n." },
            { w: 1, hanzi: "æˆ‘æ˜¯ä¸­å›½äººã€‚", answer: "Wo3 shi4 Zho1ngguo2re2n." },
            { w: 1, hanzi: "æˆ‘æ˜¯æ—¥æœ¬äººã€‚", answer: "Wo3 shi4 Ri4be3nre2n." },
            { w: 1, hanzi: "æˆ‘æ˜¯æ„å¤§åˆ©äººã€‚", answer: "Wo3 shi4 Yi4da4li4re2n." },

            { w: 1, hanzi: "ä»–æ˜¯ç¾å›½äººå—?", answer: "Ta1 shi4 Me3iguo2re2n ma?" },
            { w: 1, hanzi: "ä»–æ˜¯ä¸­å›½äººå—?", answer: "Ta1 shi4 Zho1ngguo2re2n ma?" },
            { w: 1, hanzi: "ä»–æ˜¯æ—¥æœ¬äººå—?", answer: "Ta1 shi4 Ri4be3nre2n ma?" },
            { w: 1, hanzi: "ä¸æ˜¯,ä»–æ˜¯åŠ æ‹¿å¤§äººã€‚", answer: "Bu2 shi4, ta1 shi4 Jia1na2da4re2n." },

            // [2. ê°€ì¡±] -------------------------------------
            { w: 1, hanzi: "å¥¹æ˜¯è°?", answer: "Ta1 shi4 she2i?" },
            { w: 1, hanzi: "å¥¹æ˜¯æˆ‘å¦¹å¦¹ã€‚", answer: "Ta1 shi4 wo3 me4imei." }, // ì—¬ë™ìƒ
            { w: 1, hanzi: "å¥¹æ˜¯æˆ‘å§å§ã€‚", answer: "Ta1 shi4 wo3 jie3jie." }, // ëˆ„ë‚˜/ì–¸ë‹ˆ
            { w: 1, hanzi: "å¥¹æ˜¯æˆ‘å¦ˆå¦ˆã€‚", answer: "Ta1 shi4 wo3 ma1ma." },   // ì—„ë§ˆ
            
            { w: 1, hanzi: "ä»–æ˜¯è°?", answer: "Ta1 shi4 she2i?" },
            { w: 1, hanzi: "ä»–æ˜¯æˆ‘å¼Ÿå¼Ÿã€‚", answer: "Ta1 shi4 wo3 di4di." },   // ë‚¨ë™ìƒ
            { w: 1, hanzi: "ä»–æ˜¯æˆ‘å“¥å“¥ã€‚", answer: "Ta1 shi4 wo3 ge1ge." },   // í˜•/ì˜¤ë¹ 
            { w: 1, hanzi: "ä»–æ˜¯æˆ‘çˆ¸çˆ¸ã€‚", answer: "Ta1 shi4 wo3 ba4ba." },   // ì•„ë¹ 

            { w: 1, hanzi: "ä½ æœ‰å“¥å“¥å—?", answer: "Ni3 yo3u ge1ge ma?" },
            { w: 1, hanzi: "æœ‰,è¿™æ˜¯æˆ‘å“¥å“¥ã€‚", answer: "Yo3u, zhe4 shi4 wo3 ge1ge." },

            // [3. í•™ë…„] -------------------------------------
            { w: 1, hanzi: "ä»–ä¸Šå‡ å¹´çº§?", answer: "Ta1 sha4ng ji3 nia2nji2?" },
            
            { w: 1, hanzi: "å°å­¦å…­å¹´çº§ã€‚", answer: "Xia3oxue2 liu4 nia2nji2." },  // ì´ˆ6
            { w: 1, hanzi: "åˆä¸­ä¸€å¹´çº§ã€‚", answer: "Chu1zho1ng yi1 nia2nji2." },  // ì¤‘1
            { w: 1, hanzi: "åˆä¸­äºŒå¹´çº§ã€‚", answer: "Chu1zho1ng er4 nia2nji2." },  // ì¤‘2
            { w: 1, hanzi: "åˆä¸­ä¸‰å¹´çº§ã€‚", answer: "Chu1zho1ng sa1n nia2nji2." }, // ì¤‘3
            { w: 1, hanzi: "é«˜ä¸­ä¸€å¹´çº§ã€‚", answer: "Ga1ozho1ng yi1 nia2nji2." },  // ê³ 1

            // â˜… [í•µì‹¬] ê³ ë“±í•™êµ 2í•™ë…„ (ê°€ì¤‘ì¹˜ 1.2ë°° ì ìš©) â˜…
            { w: 1.2, hanzi: "é«˜ä¸­äºŒå¹´çº§ã€‚", answer: "Ga1ozho1ng er4 nia2nji2." }, 

            // [4. ê¸°íƒ€] -------------------------------------
            { w: 1, hanzi: "ä½ å«ä»€ä¹ˆåå­—?", answer: "Ni3 jia4o she2nme mi2ngzi?" },
            { w: 1, hanzi: "æˆ‘å«é‡‘ä¸œæ°‘ã€‚", answer: "Wo3 jia4o Ji1n Do1ngmi2n." },
            { w: 1, hanzi: "ä»–å¾ˆå¸…!", answer: "Ta1 he3n shua4i!" },
            { w: 1, hanzi: "ä»–æ˜¯æˆ‘çš„æœ‹å‹ã€‚", answer: "Ta1 shi4 wo3 de pe2ngyou." },
            { w: 1, hanzi: "å¥¹å¾ˆåƒä½ !", answer: "Ta1 he3n xia4ng ni3!" },
            { w: 1, hanzi: "å¥¹å‡ å²?", answer: "Ta1 ji3 sui4?" },
            { w: 1, hanzi: "ä»Šå¹´å…«å²ã€‚", answer: "Ji1nnia2n ba1 sui4." }
        ];

        let currentIdx = 0;

        // [í™•ë¥  ë¡œì§] ê°€ì¤‘ì¹˜ ê¸°ë°˜ ëœë¤ ì„ íƒ í•¨ìˆ˜
        function getWeightedRandomIndex() {
            let totalWeight = 0;
            for (let i = 0; i < db.length; i++) {
                totalWeight += db[i].w;
            }

            let randomNum = Math.random() * totalWeight;
            
            for (let i = 0; i < db.length; i++) {
                randomNum -= db[i].w;
                if (randomNum <= 0) {
                    return i;
                }
            }
            return 0; // fallback
        }

        function nextProblem() {
            currentIdx = getWeightedRandomIndex();
            
            document.getElementById('question').innerText = db[currentIdx].hanzi;
            document.getElementById('answerInput').value = '';
            document.getElementById('result').innerText = '';
            document.getElementById('answerInput').focus();
        }

        function checkAnswer() {
            const userAns = document.getElementById('answerInput').value.trim();
            const correctAns = db[currentIdx].answer;

            // ì •ë‹µ ì²´í¬: ëŒ€ì†Œë¬¸ì/ê³µë°± ìœ ì—°ì„± + ì—„ê²©í•œ ì² ì ë¹„êµ
            const cleanUser = userAns.toLowerCase().replace(/\s+/g, ' ');
            const cleanCorrect = correctAns.toLowerCase().replace(/\s+/g, ' ');

            const resDiv = document.getElementById('result');

            if (cleanUser === cleanCorrect) {
                resDiv.innerHTML = "<span class='correct'>ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>";
                // 1ì´ˆ í›„ ìë™ ë„˜ì–´ê°
                setTimeout(nextProblem, 1000); 
            } else {
                resDiv.innerHTML = `<span class='wrong'>ì˜¤ë‹µ! ì •ë‹µ: ${correctAns}</span>`;
            }
        }

        // ì—”í„°í‚¤ ì§€ì›
        document.getElementById("answerInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkAnswer();
            }
        });

        // ì‹œì‘
        nextProblem();
    </script>
</body>
</html>
